sequenceDiagram
    autonumber
    participant U as User
    participant UI as App UI
    participant M as Mother FSM
    participant MRT as Mother Intent RT
    participant AMB as Ambient Intent RT
    participant AOV as Canvas Context RT

    U->>UI: t=0.0 Launch app
    UI->>M: phase = observing
    Note over UI: Defaults: Always-on ON, Ambient ON, Intent Canvas OFF

    U->>UI: t=5.0 Upload 2 images
    UI->>M: t=5.0 observing -> watching -> intent_hypothesizing (fast path)
    UI->>MRT: t=5.0 /intent_rt_mother dispatch (fastUploadPath=true)
    Note right of MRT: Snapshot wait cap ~50ms

    par Background in parallel
        UI->>AMB: t=5.0 schedule ambient intent (import_batch)
    and
        UI->>AOV: t=5.0 mark canvas dirty + schedule always-on scan
    end

    MRT-->>UI: t=5.2+ partial INTENT_ICONS
    MRT-->>UI: t=5.6+ final INTENT_ICONS

    alt Realtime mode signal present
        UI->>M: apply intent proposal
        UI-->>U: proposal appears in Mother panel
    else Realtime mode missing
        UI->>M: fail request no fallback mode
        UI-->>U: no proposal failure cooldown path
    end

    AMB->>UI: t=6.46 first eligible ambient run (1.2s + 260ms)
    Note over AMB,UI: Ambient dispatch can be skipped while Mother pending
    AOV->>UI: t=6+ first eligible always-on run after idle/throttle gates
