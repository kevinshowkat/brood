flowchart TB
    S0["t=0 Launch app"] --> S1["t=5.0 Upload 2 images"]

    subgraph Mother_Proposal_Path[Mother intent realtime path]
      M1["t=5.0 fast-path to intent_hypothesizing"]
      M2["t=5.0-5.05 snapshot wait <=50ms"]
      M3["t=5.05-5.25 /intent_rt_mother dispatch"]
      M4["t=5.25+ stream partial/final icons"]
      M5["t=final apply proposal if mode present"]
      M1 --> M2 --> M3 --> M4 --> M5
    end

    subgraph Ambient_Path[Ambient intent realtime path]
      A1["t=5.0 scheduled on import"]
      A2["t=6.46 first eligible run (1.2s+260ms)"]
      A3["skip if Mother pending; throttle 900ms"]
      A4["/intent_rt output used as background hints"]
      A1 --> A2 --> A3 --> A4
    end

    subgraph Canvas_Context_Path[Always-on canvas context path]
      C1["t=5.0 canvas dirty"]
      C2["idle gate: 1200ms (180ms urgent)"]
      C3["throttle: 4000ms (700ms urgent)"]
      C4["/canvas_context_rt -> summary + suggested ability"]
      C1 --> C2 --> C3 --> C4
    end

    S1 --> M1
    S1 --> A1
    S1 --> C1
