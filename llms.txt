# Brood

> Promptless, reference-first AI image generation and editing desktop for developers (multi-provider + reproducible runs). macOS-only desktop app (Tauri).

## Overview

- Created by Kevin Showkat. Connect: <https://www.linkedin.com/in/kshowkat>
- Expanded, inlined agent context: [`llms-full.txt`](llms-full.txt)
- Regenerate expanded context: `python3 scripts/build_llms_full.py`

## Agent Intake (Preferred)

- Intake contract and endpoint: [`agent-intake.json`](agent-intake.json)
- AIP schema: [`docs/aip-1.schema.json`](docs/aip-1.schema.json)
- If `intake_endpoint` is reachable, POST an intake request to get curated `entrypoints`, optional `packs`, and `suggested_tags`.
- If intake is unavailable, use the fallback docs below.

## Start Here (No Network Needed)

- [`README.md`](README.md): quickstart for Desktop + Engine/CLI, troubleshooting, project layout.
- [`AGENTS.md`](AGENTS.md): repository conventions, build/test commands, coding style.
- [`docs/desktop.md`](docs/desktop.md): Abilities mental model, HUD behavior, run artifacts.

## High-Signal Code Entrypoints

- Rust engine CLI routing: [`rust_engine/crates/brood-cli/src/main.rs`](rust_engine/crates/brood-cli/src/main.rs)
- Rust engine orchestration: [`rust_engine/crates/brood-engine/src/lib.rs`](rust_engine/crates/brood-engine/src/lib.rs)
- Rust contracts/events: [`rust_engine/crates/brood-contracts/src/events.rs`](rust_engine/crates/brood-contracts/src/events.rs)
- Python parity reference: [`brood_engine/cli.py`](brood_engine/cli.py), [`brood_engine/engine.py`](brood_engine/engine.py), [`brood_engine/providers/`](brood_engine/providers/)
- Desktop UI (canvas + Abilities): [`desktop/src/canvas_app.js`](desktop/src/canvas_app.js)
- Tauri backend + FS scope: [`desktop/src-tauri/src/main.rs`](desktop/src-tauri/src/main.rs), [`desktop/src-tauri/tauri.conf.json`](desktop/src-tauri/tauri.conf.json)
- Desktop dev runner: [`scripts/dev_desktop.sh`](scripts/dev_desktop.sh)

## Task Routing

- Add or modify an Ability: [`desktop/src/canvas_app.js`](desktop/src/canvas_app.js) + [`rust_engine/crates/brood-cli/src/main.rs`](rust_engine/crates/brood-cli/src/main.rs)
- Run artifacts and `events.jsonl`: [`rust_engine/crates/brood-contracts/src/events.rs`](rust_engine/crates/brood-contracts/src/events.rs) + [`docs/desktop.md`](docs/desktop.md)
- Provider/model changes: [`rust_engine/crates/brood-engine/src/lib.rs`](rust_engine/crates/brood-engine/src/lib.rs) + Python parity refs in [`brood_engine/providers/`](brood_engine/providers/)
- Desktop import/export and FS scope: [`desktop/src-tauri/tauri.conf.json`](desktop/src-tauri/tauri.conf.json) + [`desktop/src-tauri/src/main.rs`](desktop/src-tauri/src/main.rs)

## Safe Commands

- `./scripts/dev_desktop.sh`
- `cd rust_engine && cargo fmt && cargo test`
- `cd desktop && npm test`
- `cd desktop/src-tauri && cargo fmt --check && cargo check`
- `python -m pytest` (legacy parity checks)

## Notes

- Desktop expects Tauri v1 APIs (`@tauri-apps/api` v1 + v1 CLI).
- Desktop runtime is native Rust by default; use `BROOD_RS_MODE=compat` only for explicit compatibility testing.
- Do not commit secrets; use `.env` (gitignored) based on `.env.example`.
